<div class="hero-slide-media hero__slide" id="node-id">

    <script type="text/javascript">
        function fade(element, callBack) {
            var op = 1;
            var timer = setInterval(function() {
                if(op <= 0.1) {
                    clearInterval(timer);
                    element.style.display = 'none';
                    setTimeout(callBack, 50);
                }
                element.style.opacity = op;
                element.style.filter = 'alpha(opacity=' + op * 100 + ')';
                op -= op * 0.1;
            }, 50);
        }

        function unfade(element, callBack) {
            var op = 0.1;
            element.style.opacity = 0;
            element.style.display = 'block';
            var timer = setInterval(function() {
                console.log(op);
                if(op >= 1) {
                    clearInterval(timer);
                    setTimeout(callBack, 50);
                }
                element.style.opacity = op;
                element.style.filter = 'alpha(opacity=' + op * 100 + ')';
                op += op * 0.1;
            }, 50);
        }

        window.onload = function(e) {
            // videos:
            var posterUrl = "https://cdn.shopify.com/s/files/1/2570/3070/files/047_RJP7207_6a638ddf-20a5-41c5-b4ef-2a81bb9d99b8.jpg?13766845966228802767";

            var lgvids = [
                "https://cdn.shopify.com/s/files/1/2570/3070/files/Segement-1-Mobile.mp4?10084847405532614363",
                "https://cdn.shopify.com/s/files/1/2570/3070/files/Segement-2-Mobile.mp4?10084847405532614363",
                "https://cdn.shopify.com/s/files/1/2570/3070/files/Segement-3-Mobile.mp4?10084847405532614363"
            ];

            var welcome_message = "TEXT";
            var hero_title = "Forget Me Not";
            var hero_cta_url = "https://jontedesigns.com/collections/forget-me-not";
            var hero_cta_text = "View Collection";




            var preLoad = document.getElementById('loading');
            if ((screen.width < 480) || (screen.height < 480)) {
                document.getElementById("node-id").innerHTML=('<video webkit-playsinline muted autoplay playsinline src="URL" id="bgvid" poster ="URL" type="video/mp4"></video><div class="welcome-message"><p class="hero__subtitle">TEXT</p><h2 class="h1 hero__title">TEXT TEXT TEXT</h2><a class="btn hero__cta" href="URL">TEXT TEXT <span class="icon icon-arrow-right" aria-hidden="true"></span></a></div>');
                var smvid = document.getElementById('bgvid');

                smvid.addEventListener('loadstart', function(e) {
                    //console.log('looking for video');
                    preLoad.id = "loading";
                });
                smvid.addEventListener('loadeddata', function(e) {
                    //console.log('loaded first frame');
                    preLoad.id = "loaded";
                });

                var smvids = [
                    "https://cdn.shopify.com/s/files/1/2570/3070/files/Segement-1-Mobile.mp4?10084847405532614363",
                    "https://cdn.shopify.com/s/files/1/2570/3070/files/Segement-2-Mobile.mp4?10084847405532614363",
                    "https://cdn.shopify.com/s/files/1/2570/3070/files/Segement-3-Mobile.mp4?10084847405532614363"
                ];
                var smactiveVideo = 0;
                smvid.addEventListener('ended', function(e) {
                    smactiveVideo = (++smactiveVideo) % smvids.length;
                    smvid.src = smvids[smactiveVideo];
                    smvid.play();
                });
            }
            else {
                var videoPlayers = "";
                for(var i = 0; i < lgvids.length; i++) {
                    var url = lgvids[i];
                    var videoTag = '';
                    var videoType = '';
                    if(url.toLowerCase().indexOf('.ogg') !== -1) {
                        videoType = 'video/ogg';
                    } else if(url.toLowerCase().indexOf('.webm') !== -1) {
                        videoType = 'video/webm';
                    } else if(url.toLowerCase().indexOf('.mp4') !== -1) {
                        videoType = 'video/mp4';
                    } else {
                        continue;
                    }
                    videoPlayers = videoPlayers + '<video muted preload="auto" style="display: none" src="' + url + '" class="bgvid" type="' + videoType + '"></video>';
                }
                videoPlayers = videoPlayers + '<div class="welcome-message">';
                videoPlayers = videoPlayers + '<p class="welcome-message">' + welcome_message + '</p>';
                videoPlayers = videoPlayers + '<h2 class="h1 hero__title">' + hero_title + '</h2>';
                videoPlayers = videoPlayers + '<a class="btn hero__cta" href="' + hero_cta_url + '">' + hero_cta_text + ' <span class="icon icon-arrow-right" aria-hidden="true"></span></a>';
                video_players = videoPlayers + '</div>';
                document.getElementById("node-id").innerHTML=(videoPlayers);
                document.getElementById("node-id").style.backgroundImage = 'url(' + posterUrl + ')';
                var lgvidplayers = document.getElementsByClassName('bgvid');

                var lgactiveVideo = 0;

                for(var i = 0; i < lgvidplayers.length; i++) {
                    lgvidplayers[i].addEventListener('loadstart', function(e) {
                        //console.log('looking for video');
                        preLoad.id = "loading";
                    });

                    lgvidplayers[i].addEventListener('loadeddata', function(e) {
                        //console.log('loaded first frame');
                        preLoad.id = "loaded";
                    });

                    lgvidplayers[i].addEventListener('ended', function(e) {
                        fade(lgvidplayers[lgactiveVideo], function () {
                            lgactiveVideo = (lgactiveVideo + 1) % lgvidplayers.length;
                            unfade(lgvidplayers[lgactiveVideo], function () {
                                lgvidplayers[lgactiveVideo].play();
                            });
                        });
                    });
                }
                unfade(lgvidplayers[lgactiveVideo], function () {
                    lgvidplayers[lgactiveVideo].play();
                })
            }
        };


    </script>

    <div id="loading"></div>

</div>